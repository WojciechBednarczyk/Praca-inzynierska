\chapter{Analiza wymagañ}
Przed przyst¹pieniem do implementacji jakiegokolwiek systemu nale¿y dok³adnie przemyœleæ zasady jego funkcjonowania, sprecyzowaæ wzglêdem niego oczekiwania, przewidzieæ interakcja z u¿ytkownikiem. Z tej te¿ przyczyny w niniejszym rozdziale przedstawiono analizê wymagañ projektowanej aplikacji. Dostarczono w nim opis wymagañ funkcjonalnych  wzglêdem zidentyfikowanych ról u¿ytkowników oraz sprecyzowano wymaganie niefunkcjonalne. Wymagania zilustrowano ma diagramie przypadków u¿ycia.


\section{Wymagania funkcjonalne}
Dostêp do poszczególnych funkcji aplikacji bêdzie uzale¿niony od roli u¿ytkownika. Zdefiniowano nastêpuj¹ce role: niezalogowany u¿ytkownik, podopieczny oraz trener (któr¹œ z tych dwóch ostatnich ról bêdzie mia³ zalogowany u¿ytkownik). Dziêki podzia³owi na role ³atwiej i~bezpieczniej bêdzie przebiegaæ jej póŸniejsza implementacja i u¿ytkowanie.\\
% TO DO: DONE

\noindent
\textbf{FR-1}
Niezalogowany u¿ytkownik mo¿e za³o¿yæ konto w systemie podaj¹c wymagane dane: login, has³o oraz podstawowe dane osobowe\\[5pt]
\noindent
\textbf{FR-2}
Niezalogowany u¿ytkownik mo¿e zalogowaæ siê do systemu podaj¹c login oraz has³o\\[5pt]
\noindent
\textbf{FR-3}
Ka¿dy u¿ytkownik mo¿e przegl¹daæ tabele, w której znajduj¹ siê æwiczenia fitness\\[5pt]
\noindent
\textbf{FR-4}
Ka¿dy u¿ytkownik mo¿e przegl¹daæ szczegó³y æwiczenia, na których znajduje siê opis jak wykonaæ æwiczenie oraz film instrukta¿owy\\[5pt]
\noindent
\textbf{FR-5}
Podopieczny mo¿e wystawiæ opinie trenerowi, z którym wspó³pracuje\\[5pt]
\noindent
\textbf{FR-6}
Podopieczny mo¿e wys³aæ do trenera proœbê o wspó³pracê\\[5pt]
\noindent
\textbf{FR-7}
Trener mo¿e stworzyæ plan treningowy dla podopiecznego bazuj¹c na tabeli z æwiczeniami\\[5pt]
\noindent
\textbf{FR-8}
Trener mo¿e odrzuciæ proœbê podopiecznego o rozpoczêcie wspó³pracy\\[5pt]
\noindent
\textbf{FR-9}
Trener mo¿e zaakceptowaæ proœbê podopiecznego o rozpoczêcie wspó³pracy\\[5pt]
\noindent
\textbf{FR-10}
Trener mo¿e zakoñczyæ wspó³pracê z podopiecznym\\[5pt]
\noindent
\textbf{FR-11}
Zalogowany u¿ytkownik mo¿e zmieniæ swoje dane w profilu\\[5pt]
\noindent
\textbf{FR-12}
Zalogowany u¿ytkownik mo¿e wys³aæ wiadomoœæ do innego u¿ytkownika istniej¹cego w systemie\\[5pt]
\noindent
\textbf{FR-13}
Zalogowany u¿ytkownik ma mo¿liwoœæ wylogowania siê z systemu\\[5pt]
\noindent
\textbf{FR-14}
Zalogowany u¿ytkownik ma mo¿liwoœæ wyszukania profilu innego u¿ytkownika istniej¹cego w systemie\\[5pt]
\noindent Opis ten uzupe³nia diagram przypadków u¿ycia pokazany na rysunku~\ref{fig:diagramPrzypadkowUzycia}.
% TO DO: DONE
\begin{figure}[htb]
  \centering
	\includegraphics[width=1\textwidth]{rys02/useCaseDiagram2}
	\caption{Diagram przypadków u¿ycia}
  \label{fig:diagramPrzypadkowUzycia}
\end{figure}

\noindent\textbf{Scenariusze przypadków u¿ycia}\\[8pt]
\noindent
\textbf{PU01: Za³o¿enie konta w systemie}\\
\emph{Aktor}: Niezalogowany u¿ytkownik\\
\emph{Opis}: Rejestracja nowego konta u¿ytkownika\\
\emph{Warunki wstêpne}: U¿ytkownik jest niezalogowany, nie posiada konta oraz znajduje siê na ekranie startowym. \\
\emph{Przebieg}: 
\begin{enumerate}
  \item Niezalogowany u¿ytkownik klika w przycisk ''Rejestracja''
  \item Otwiera siê widok rejestracji, na którym znajduje siê formularz
	\item Niezalogowany u¿ytkownik wype³nia wymagane pola w formularzu
	\item Niezalogowany u¿ytkownik klika w przycisk ''Zarejestruj''
	\begin{itemize}[topsep=0pt]%[noitemsep,topsep=4pt,parsep=0pt,partopsep=4pt,leftmargin=*]
	\item Wprowadzone dane s¹ poprawne
	\begin{itemize}[topsep=0pt]
	\item Konto u¿ytkownika zostaje utworzone
	\end{itemize}
	\item Wprowadzone dane s¹ niepoprawne
	\begin{itemize}[topsep=0pt]
	\item System informuje u¿ytkownika o b³êdnie wprowadzonych danych
	\end{itemize}
	\end{itemize}
\end{enumerate}

\noindent
\textbf{PU02: Logowanie do systemu}\\
\emph{Aktor: } Niezalogowany u¿ytkownik\\
\emph{Opis: } Logowanie siê u¿ytkownika do aplikacji\\
\emph{Warunki wstêpne: } U¿ytkownik jest niezalogowany oraz znajduje siê na ekranie startowym. \\
\emph{Przebieg: }
\begin{enumerate}
  \item Niezalogowany u¿ytkownik klika w przycisk "`Logowanie"'
  \item Otwiera siê widok logowanie, na którym znajduje siê formularz
	\item Niezalogowany u¿ytkownik w formularzu login oraz has³o
	\item Niezalogowany u¿ytkownik klika w przycisk "`Zaloguj"'
	\begin{itemize}[topsep=0pt]
	\item Wprowadzone dane s¹ poprawne
	\begin{itemize}[topsep=0pt]
	\item U¿ytkownik jest zalogowany w systemie
	\end{itemize}
	\item Wprowadzone dane s¹ niepoprawne
	\begin{itemize}[topsep=0pt]
	\item System informuje u¿ytkownika o b³êdnie wprowadzonych danych
	\end{itemize}
	\end{itemize}
\end{enumerate}

\noindent
\textbf{PU03: Przegl¹danie atlasu æwiczeñ}\\
\emph{Aktor: } Niezalogowany u¿ytkownik, Podopieczny, Trener\\
\emph{Opis: } Przegl¹danie tabeli z æwiczeniami, na której znajduje siê: numer, nazwa, grupa miêœniowa oraz ocena æwiczenia  \\
\emph{Warunki wstêpne: } U¿ytkownik znajduje siê na ekranie startowym. \\
\emph{Przebieg: }
\begin{enumerate}
  \item U¿ytkownik klika w przycisk "`Atlas æwiczeñ"'
  \item Otwiera siê widok atlasu æwiczeñ, na którym znajduje siê tabela z æwiczeniami
	\item U¿ytkownik mo¿e przechodziæ po stronach tabeli klikaj¹c w przyciski strza³ek pod tabel¹
\end{enumerate}

\noindent
\textbf{PU04: Przegl¹danie szczegó³ów æwiczenia}\\
\emph{Aktor: } Niezalogowany u¿ytkownik, Podopieczny, Trener\\
\emph{Opis: } Przegl¹danie szczegó³ów danego æwiczeniae\\
\emph{Warunki wstêpne: } U¿ytkownik znajduje siê na ekranie atlasu æwiczeñ. \\
\emph{Przebieg: }
\begin{enumerate}
  \item U¿ytkownik klika w wybrane æwiczenie w tabeli
  \item Otwiera siê widok szczegó³ów æwiczenia, zawieraj¹cy: nazwê, opis, ocenê oraz film instrukta¿owy æwiczenia
\end{enumerate}

\noindent
\textbf{PU05: Wystawienie opinii trenerowi}\\
\emph{Aktor: } Podopieczny\\
\emph{Opis: } Wystawienie opinii przez podopiecznego dla swojego trenera\\
\emph{Warunki wstêpne: } Podopieczny jest zalogowany. Podopieczny znajduje siê na ekranie profilu trenera. Podopieczny znajduje siê w gronie podopiecznych tego trenera\\
\emph{Przebieg: }
\begin{enumerate}
  \item Podopieczny klika przycisk wystawiania opinii
  \item Pokazuje siê pole tekstowe, w którym podopieczny mo¿e wpisaæ opiniê i wystawiæ ocenê
	\item Po wpisaniu opinii, podopieczny klika w przycisk zapisz
	\item Opinia zostaje zapisana na koncie trenera
\end{enumerate}

\noindent
\textbf{PU06: Wys³anie proœby do trenera o przyjêcie w grono podopiecznych}\\
\emph{Aktor: } Podopieczny\\
\emph{Opis: } Wys³anie proœby do danego trenera o przyjêcie w grono podopiecznych co umo¿liwi wspó³pracê\\
\emph{Warunki wstêpne: } Podopieczny jest zalogowany. Podopieczny znajduje siê na ekranie profilu trenera. Podopieczny nie jest w gronie podopiecznych tego trenera\\
\emph{Przebieg: }
\begin{enumerate}
  \item Podopieczny klika przycisk wys³ania proœby o przyjêcia w grono podopiecznych
	\item Pokazuje siê informacja z potwierdzeniem wys³ania proœby
\end{enumerate}

\noindent
\textbf{PU07: Stworzenie planu treningowego}\\
\emph{Aktor: } Trener\\
\emph{Opis: } Trener tworzy plan treningowy dla podopiecznego z æwiczeñ istniej¹cych w~systemie\\
\emph{Warunki wstêpne: } Trener jest zalogowany. Trener znajduje siê na ekranie listy podopiecznych. Trener posiada kogoœ w gronie podopiecznych \\
\emph{Przebieg: }
\begin{enumerate}
  \item Trener klika w ikonê opcji obok wybranego podopiecznego w tabeli
	\item Pokazuje siê ma³e menu z dostêpnymi opcjami
	\item Trener klika w opcjê "`Stwórz plan"'
	\item Pokazuje siê ekran tworzenia planu
	\item Trener wybiera æwiczenia do planu z listy æwiczeñ
	\item Trener klika w przycisk zapisz
	\item Plan treningowy zostaje zapisany dla podopiecznego
\end{enumerate}

\noindent	
\textbf{PU08: Odrzucenie proœby o przyjêcie do grona podopiecznych}\\
\emph{Aktor: } Trener\\
\emph{Opis: } Trener mo¿e odrzuciæ proœbê wys³an¹ przez podopiecznego o przyjêcie w grono podopiecznych\\
\emph{Warunki wstêpne: } Trener jest zalogowany. Trener znajduje siê na ekranie próœb o przyjêcie\\
\emph{Przebieg: }
\begin{enumerate}
  \item Na ekranie próœb o przyjêcie wyœwietla siê lista z proœbami
	\item Trener obok wybranej proœby klika w ikonê odrzucenia
	\item Pokazuje siê informacja o odrzuceniu proœby
\end{enumerate}

\noindent
\textbf{PU09: Zaakceptowanie proœby o przyjêcie do grona podopiecznych}\\
\emph{Aktor: } Trener\\
\emph{Opis: } Trener mo¿e zaakceptowaæ proœbê wys³an¹ przez podopiecznego o przyjêcie w grono podopiecznych\\
\emph{Warunki wstêpne: } Trener jest zalogowany. Trener znajduje siê na ekranie próœb o przyjêcie\\
\emph{Przebieg: }
\begin{enumerate}
  \item Na ekranie próœb o przyjêcie wyœwietla siê lista z proœbami
	\item Trener obok wybranej proœby klika w ikonê akceptacji
	\item Podopieczny zostaje zapisany do grona podopiecznych tego trenera
	\item Pokazuje siê informacja o zaakceptowaniu proœby
\end{enumerate}

\noindent
\textbf{PU10: Usuniêcie podopiecznego z grona podopiecznych}\\
\emph{Aktor: } Trener\\
\emph{Opis: } Trener mo¿e usun¹æ swojego podopiecznego z grona podopiecznych\\
\emph{Warunki wstêpne: } Trener jest zalogowany. Trener znajduje siê na ekranie listy podopiecznych. Trener posiada kogoœ w gronie podopiecznych\\
\emph{Przebieg: }
\begin{enumerate}
  \item Trener klika w ikonê opcji obok wybranego podopiecznego w tabeli
	\item Pokazuje siê ma³e menu z dostêpnymi opcjami
	\item Trener klika w opcjê "`Usun¹æ podopiecznego"'
	\item Pokazuje siê komunikat czy na pewno usun¹æ podopiecznego
	\item Trener wybiera przycisk akceptacji
	\item Podopieczny zostaje usuniêty z grona podopiecznych tego trenera
	\item Pojawia siê potwierdzenie usuniêcia podopiecznego z grona podopiecznych
\end{enumerate}

\noindent
\textbf{PU11: Zmiana danych w profilu}\\
\emph{Aktor: } Trener, Podopieczny\\
\emph{Opis: } Zalogowany u¿ytkownik mo¿e zmieniæ swoje dane w profilu takie jak email, has³o czy lokalizacja\\
\emph{Warunki wstêpne: } U¿ytkownik jest zalogowany. U¿ytkownik znajduje siê na ekranie swojego profilu\\
\emph{Przebieg: }
\begin{enumerate}
  \item Zalogowany u¿ytkownik na ekranie swojego profilu klika w przycisk "`Zmieñ dane"'
	\item Pokazuje siê formularz z danymi do zmiany
	\item Zalogowany u¿ytkownik wype³nia wybrane pola formularza danymi
	\item Zalogowany u¿ytkownik klika w przycisk "`Zapisz zmiany"'
	\begin{itemize}[topsep=0pt]
	\item Wprowadzone dane s¹ poprawne
	\begin{itemize}[topsep=0pt]
	\item Dane u¿ytkownika zosta³y zmienione
	\end{itemize}
	\item Wprowadzone dane s¹ niepoprawne
	\begin{itemize}[topsep=0pt]
	\item System informuje u¿ytkownika o b³êdnie wprowadzonych danych
	\end{itemize}
	\end{itemize}
\end{enumerate}

\noindent
\textbf{PU12: Wys³anie wiadomoœci do innego u¿ytkownika}\\
\emph{Aktor: } Trener, Podopieczny\\
\emph{Opis: } Zalogowany u¿ytkownik mo¿e wys³aæ wiadomoœæ do innego u¿ytkownika\\
\emph{Warunki wstêpne: } U¿ytkownik jest zalogowany. U¿ytkownik znajduje siê na ekranie profilu innego u¿ytkownika\\
\emph{Przebieg: }
\begin{enumerate}
  \item Zalogowany u¿ytkownik na ekranie profilu innego u¿ytkownika klika w przycisk "`Wyœlij wiadomoœæ"'
	\item Pokazuje siê pola tekstowe, w które mo¿na wpisaæ wiadomoœæ
	\item Zalogowany u¿ytkownik wpisuje wiadomoœæ w polu tekstowym
	\item Zalogowany u¿ytkownik klika w przycisk "`Wyœlij"'
	\item Wiadomoœæ zostaje wys³ana do innego u¿ytkownika
\end{enumerate}

\noindent
\textbf{PU13: Wylogowanie z systemu}\\
\emph{Aktor: } Trener, Podopieczny\\
\emph{Opis: } Zalogowany u¿ytkownik mo¿e wylogowaæ siê z systemu tym samym koñcz¹c sesje\\
\emph{Warunki wstêpne: } U¿ytkownik jest zalogowany\\
\emph{Przebieg: }
\begin{enumerate}
  \item Zalogowany u¿ytkownik na dowolnym ekranie klika w ikonê profilu na pasku nawigacji
	\item Pokazuj¹ siê ma³e menu z dostêpnymi opcjami
	\item Zalogowany u¿ytkownik klika w przycisk "`Wyloguj"'
	\item Zalogowany u¿ytkownik zostaje wylogowany z systemu
\end{enumerate}

\noindent
\textbf{PU14: Wyszukanie profilu u¿ytkownika}\\
\emph{Aktor: } Trener, Podopieczny\\
\emph{Opis: } Zalogowany u¿ytkownik mo¿e wyszukaæ profil innego u¿ytkownika\\
\emph{Warunki wstêpne: } U¿ytkownik jest zalogowany\\
\emph{Przebieg: }
\begin{enumerate}
  \item Zalogowany u¿ytkownik na dowolnym ekranie klika w ikonê szukania na pasku nawigacji
	\item Pokazuj¹ siê pole tekstowe, w którym mo¿na wpisaæ imiê lub nazwisko szukanego u¿ytkownika
	\item Zalogowany u¿ytkownik wpisuje imiê lub nazwisko szukanego u¿ytkownika
	\item Zalogowany u¿ytkownik klika w ikonê szukania
	\item Pokazuje siê ekran z list¹ znalezionych u¿ytkowników
	\item Po klikniêciu w wybranego u¿ytkownika pokazuje siê ekran jego profilu
\end{enumerate}

\newpage

\section{Wymaganie niefunkcjonalne}
Wymaganie niefunkcjonalne opisane dalej okreœlaj¹ techniczne aspekty aplikacji oraz po¿¹dane zachowanie systemu. Wymagania te mog¹ odnosiæ siê do dostêpnoœci, wydajnoœci czy bezpieczeñstwa projektowanej aplikacji.\\

\noindent
\textbf{NFR-1}
Aplikacja musi byæ dostêpna 24/7\\[5pt]
\noindent
\textbf{NFR-2}
Aplikacja musi byæ niezale¿na od systemu operacyjnego klienta\\[5pt]
\noindent
\textbf{NFR-3}
Baza danych bêdzie wdro¿ona na darmowym serwerze\\[5pt]
\noindent
\textbf{NFR-4}
Do korzystania z aplikacji wymagany jest dostêp do internetu\\[5pt]
\noindent
\textbf{NFR-5}
Has³o do konta u¿ytkownika jest szyfrowane algorytmem bCrypt i zapisywane do bazy danych\\[5pt]
\noindent
\textbf{NFR-6}
Autoryzacja przebiega przy pomocy JWT zapisywanym w plikach cookies\\[5pt]
\noindent
\textbf{NFR-7}
Aplikacja musi dzia³aæ poprawnie na najpopularniejszych przegl¹darkach typu Firefox, Chrome czy Safari\\[5pt]
\noindent
\textbf{NFR-8}
Kopia bazy danych bêdzie tworzona automatycznie raz w tygodniu

\section{Koncept aplikacji}
Na rysunku ~\ref{fig:koncept} przedstawiono koncept interfejsu u¿ytkownika. Widok aplikacji mo¿na podzieliæ na dwie g³ówne sekcje. Sekcja oznaczona na rysunku cyfr¹ 1 jest paskiem nawigacyjnym. Pozwoli on na proste i intuicyjne przemieszczanie siê po poszczególnych komponentach aplikacji. Sekcja oznaczona na rysunku cyfr¹ 2 jest sekcj¹ g³ówn¹. Na niej bêdzie przebiega³o wiêkszoœæ interakcji z u¿ytkownikiem. Wyœwietlane na niej bêd¹ poszczególne komponenty, które bêd¹ oferowa³y wczeœniej wspomniane funkcje.
\begin{figure}[htb]
  \centering
\includegraphics[width=.9\textwidth]{rys02/koncept}
  \caption{Koncept aplikacji}
  \label{fig:koncept}
\end{figure}

\section{Architektura aplikacji}

Na rysunku ~\ref{fig:architektura} przedstawiono uproszczon¹ architekturê projektowanego systemu. Wyszczególniono w niej: bazê danych, backend oraz frontend. 

Baza danych bêdzie przechowywa³a wszystkie informacje potrzebne do funkcjonowania aplikacji. W projektowanej aplikacji zastosowano relacyjny model bazy danych.  

Backend jest czêœci¹ aplikacji niewidoczn¹ dla u¿ytkownika, do której nie ma on bezpoœredniego dostêpu. Czêœæ ta odpowiedzialna jest za ca³¹ logikê biznesow¹ aplikacji. Komunikuje siê bezpoœrednio z baz¹ danych pobieraj¹c lub zapisuj¹c dane. Po przetworzeniu danych wysy³a odpowiedŸ do frontendu.

Frontend jest czêœci¹ aplikacji dzia³aj¹c¹ po stronie u¿ytkownika, najczêœciej w przegl¹darce internetowej. Odpowiada za interakcje z u¿ytkownikiem, pobieranie od niego danych, a nastêpnie przesy³anie ich do backendu w celu przetworzenia. Po otrzymaniu wiadomoœci zwrotnej od backendu, frontend wyœwietla j¹ w odpowiedni sposób w aplikacji. Komunikacja pomiêdzy frontendem, a backendem odbywa siê poprzez REST API.
\begin{figure}[htb]
  \centering
	\includegraphics[width=0.8\textwidth]{rys02/architektura}
	\caption{Architektura aplikacji}
  \label{fig:architektura}
\end{figure}

% TO DO: DONE

